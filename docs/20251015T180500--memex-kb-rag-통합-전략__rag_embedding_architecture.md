---
title:      "memex-kb v2.0: RAG í†µí•© ì „ëµ"
date:       2025-10-15T18:05:00+09:00
tags:       ["memex-kb", "rag", "embedding", "architecture", "strategy"]
identifier: "20251015T180500"
---

# ğŸ§  memex-kb v2.0: RAG í†µí•© ì „ëµ

**ëª©ì **: Legacy â†’ Denote â†’ RAG-ready ë³€í™˜ ì‹œìŠ¤í…œ
**ì ‘ê·¼**: ê²€ì¦ëœ ê¸°ìˆ  ìŠ¤íƒ í†µí•© + ë…ì°½ì  ë°©ë²•ë¡ 
**ìƒíƒœ**: ğŸ”§ ì„¤ê³„ ë‹¨ê³„

---

## ğŸ¯ í•µì‹¬ ì¸ì‚¬ì´íŠ¸

### "ë³€í™˜ ìì²´ëŠ” ê°í¥ì´ ì—†ë‹¤"

**ê¸°ìˆ  ìŠ¤íƒì€ ì´ë¯¸ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤** (2025 Q3):
```yaml
AI_Infrastructure:
  n8n: 40+ ë…¸ë“œ ì›Œí¬í”Œë¡œìš°, AI Agent Automation
  Supabase_pgvector: 2,945ê°œ Org íŒŒì¼ ì„ë² ë”© ì™„ë£Œ
  Ollama: multilingual-e5-large (1024-dim), GPU í´ëŸ¬ìŠ¤í„°
  Rerank_API: ìì²´ êµ¬ì¶• ì„œë²„

Data_Engineering:
  Airbyte: Channel.io â†’ PostgreSQL ETL
  JSONB: Agent-readable Data Lake
  Notion/JIRA: API í†µí•©

ì„±ê³¼:
  - 8,310ê°œ ë²¡í„° ì²­í¬ ìƒì„±
  - 100% ì„ë² ë”© ì™„ë£Œ
  - n8n RAG ì›Œí¬í”Œë¡œìš° ìš´ì˜ ì¤‘
```

**â†’ ì´ê²ƒë“¤ì€ "ê»ë°ê¸°"ì…ë‹ˆë‹¤. ì´ë¯¸ ë‹¤ í•´ë´¤ìŠµë‹ˆë‹¤.**

---

## ğŸ’¡ memex-kbì˜ ì§„ì •í•œ ê°€ì¹˜

### ë¬¸ì œ ì •ì˜

**Q**: ê¸°ìˆ  ìŠ¤íƒì„ ë‹¤ ì•Œë©´ ë˜ëŠ”ê°€?

**A**: ì•„ë‹™ë‹ˆë‹¤.

```
Pandocìœ¼ë¡œ ë³€í™˜? â†’ ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆìŒ
Ollamaë¡œ ì„ë² ë”©? â†’ íŠœí† ë¦¬ì–¼ ë§ìŒ
Supabase pgvector? â†’ ë¬¸ì„œ ì˜ ë˜ì–´ ìˆìŒ
n8n RAG ì›Œí¬í”Œë¡œìš°? â†’ ì˜ˆì œ ë§ìŒ

ê·¸ëŸ°ë°:
- íŒŒì¼ëª…ì´ ì¼ê´€ì„± ì—†ìœ¼ë©´? â†’ ê²€ìƒ‰ í’ˆì§ˆ â†“
- ë¶„ë¥˜ê°€ ëª¨í˜¸í•˜ë©´? â†’ ì»¨í…ìŠ¤íŠ¸ ë¶€ì¡±
- ë©”íƒ€ë°ì´í„° ì†ì‹¤ë˜ë©´? â†’ ì„ë² ë”© í’ˆì§ˆ â†“
- Git ì—†ìœ¼ë©´? â†’ ë²„ì „ ê´€ë¦¬ ë¶ˆê°€

â†’ ì„ë² ë”©í•´ë„ ì“¸ëª¨ì—†ìŠµë‹ˆë‹¤.
```

### memex-kbì˜ ë…ì°½ì  ì ‘ê·¼

**"Legacy â†’ RAG-ready"ì˜ ë°©ë²•ë¡ **:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì¼ê´€ì„± (Denote íŒŒì¼ëª…)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Before:                                     â”‚
â”‚ - "ìƒˆ ë¬¸ì„œ.docx"                            â”‚
â”‚ - "íšŒì˜ë¡_20250915_v2_ìµœì¢….docx"          â”‚
â”‚ - "API ì„¤ê³„ (1).docx"                       â”‚
â”‚                                             â”‚
â”‚ After (Denote):                             â”‚
â”‚ - 20250915t100000--ìƒˆ-ë¬¸ì„œ__temp.md        â”‚
â”‚ - 20250915t140000--íšŒì˜ë¡__meeting.md      â”‚
â”‚ - 20250913t150000--api-ì„¤ê³„-ê°€ì´ë“œ__        â”‚
â”‚   backend_api_guide.md                      â”‚
â”‚                                             â”‚
â”‚ íš¨ê³¼:                                       â”‚
â”‚ - íŒŒì‹± ê°€ëŠ¥ (í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ì²˜ë¦¬)           â”‚
â”‚ - ì‹œê°„ ì •ë ¬ (ìë™)                          â”‚
â”‚ - ì˜ë¯¸ ëª…í™• (í•œê¸€ ì œëª© + ì˜ì–´ íƒœê·¸)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ì²´ê³„ì„± (ê·œì¹™ ê¸°ë°˜ ìë™ ë¶„ë¥˜)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ categories.yaml:                            â”‚
â”‚                                             â”‚
â”‚ architecture:                               â”‚
â”‚   keywords: ["ì„¤ê³„", "ì•„í‚¤í…ì²˜"]           â”‚
â”‚   patterns: ["^ì‹œìŠ¤í…œ.*ì„¤ê³„"]              â”‚
â”‚   priority: 1                               â”‚
â”‚                                             â”‚
â”‚ íš¨ê³¼:                                       â”‚
â”‚ - LLM ë¹„ìš© 0ì› (í† í° ì ˆì•½)                 â”‚
â”‚ - ì¬í˜„ ê°€ëŠ¥ (YAML ì„¤ì •)                    â”‚
â”‚ - í™•ì¥ ê°€ëŠ¥ (ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì‰¬ì›€)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ì¶”ì ì„± (Git ë²„ì „ ê´€ë¦¬)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ëª¨ë“  ë³€í™˜ ê³¼ì • Git ì»¤ë°‹:                    â”‚
â”‚                                             â”‚
â”‚ git log:                                    â”‚
â”‚ - feat: add google docs adapter             â”‚
â”‚ - docs: convert 10 documents                â”‚
â”‚ - fix: improve categorization rules         â”‚
â”‚                                             â”‚
â”‚ íš¨ê³¼:                                       â”‚
â”‚ - íˆ¬ëª…ì„± (ëˆ„ê°€ ì–¸ì œ ë³€í™˜í–ˆëŠ”ì§€)            â”‚
â”‚ - ë¡¤ë°± ê°€ëŠ¥ (ì˜ëª»ëœ ë³€í™˜ ë³µêµ¬)             â”‚
â”‚ - í˜‘ì—… ê°€ëŠ¥ (íŒ€ ì§€ì‹ ê´€ë¦¬)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. í™•ì¥ì„± (Backend ì¤‘ë¦½)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Adapter Pattern:                            â”‚
â”‚                                             â”‚
â”‚ class BaseAdapter(ABC):                     â”‚
â”‚     def convert_to_markdown(): pass         â”‚
â”‚                                             â”‚
â”‚ class GoogleDocsAdapter(BaseAdapter): ...   â”‚
â”‚ class DoorayAdapter(BaseAdapter): ...       â”‚
â”‚ class ConfluenceAdapter(BaseAdapter): ...   â”‚
â”‚                                             â”‚
â”‚ íš¨ê³¼:                                       â”‚
â”‚ - ë„êµ¬ ë°”ë€Œì–´ë„ ë°ì´í„° ìœ ì§€                 â”‚
â”‚ - ê³µí†µ íŒŒì´í”„ë¼ì¸ ì¬ì‚¬ìš©                    â”‚
â”‚ - ìƒˆ Backend ì¶”ê°€ ì‰¬ì›€                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. RAG í’ˆì§ˆ (ì„ë² ë”© íŒŒì´í”„ë¼ì¸)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ê²€ì¦ëœ ì „ëµ (embedding-config):             â”‚
â”‚                                             â”‚
â”‚ í´ë”ë³„ ì°¨ë³„í™” ì²­í‚¹:                         â”‚
â”‚ - meta: 1500 í† í° (ê¸´ ê°œë… ì„¤ëª…)           â”‚
â”‚ - bib: 1200 í† í° (ì¸ìš© í¬í•¨)               â”‚
â”‚ - journal: 800 í† í° (ì¼ì¼ ë‹¨ìœ„)            â”‚
â”‚ - notes: 1000 í† í° (ê· í˜•)                  â”‚
â”‚                                             â”‚
â”‚ ì§€ì‹ ê³„ì¸µ êµ¬ì¡°:                             â”‚
â”‚ meta (ê°œë…) â†’ bib (ì›ë¦¬) â†’                  â”‚
â”‚ journal (ì‹¤ì²œ) â†’ notes (ê²°ì‹¤)               â”‚
â”‚                                             â”‚
â”‚ íš¨ê³¼:                                       â”‚
â”‚ - ì„ë² ë”© í’ˆì§ˆ í–¥ìƒ (ê³„ì¸µì  ì»¨í…ìŠ¤íŠ¸)       â”‚
â”‚ - ê²€ìƒ‰ ì •í™•ë„ í–¥ìƒ (ì˜ë¯¸ ë³´ì¡´)             â”‚
â”‚ - RAG ë‹µë³€ í’ˆì§ˆ í–¥ìƒ (í’ë¶€í•œ ì»¨í…ìŠ¤íŠ¸)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**â†’ ì´ê²ƒì´ memex-kbì˜ ë…ì°½ì„±ì…ë‹ˆë‹¤.**

---

## ğŸ—ï¸ ê²€ì¦ëœ ê¸°ìˆ  ê²½í—˜ (2025 Q3)

### 1. n8n AI Agent Automation

**ê²½í—˜**:
- 40+ ë…¸ë“œ ë³µì¡í•œ ì›Œí¬í”Œë¡œìš° ìš´ì˜
- Hierarchical AI Agent êµ¬ì¡° (Meta â†’ Domain Agents)
- ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘: "ë°±ì—”ë“œ/í”„ë¡ íŠ¸ AIê°€, ê²€ì¦/ì—°ê²° ì‚¬ëŒì´"

**í™œìš© (memex-kb v2.0)**:
```javascript
// n8n Workflow: Legacy â†’ RAG Pipeline
Trigger (ì¼ì •: ë§¤ì¼ ë°¤ 12ì‹œ)
    â†“
Memex-KB (ìƒˆ ë¬¸ì„œ ë³€í™˜)
    â†“
Denote Markdown (~/memex-kb/docs/)
    â†“
Embedding (Ollama, GPU-03)
    â†“
Supabase Vector Store
    â†“
Slack ì•Œë¦¼ ("10ê°œ ë¬¸ì„œ ì„ë² ë”© ì™„ë£Œ")
```

---

### 2. Supabase pgvector ì„ë² ë”©

**ê²½í—˜**:
- **2,945ê°œ Org íŒŒì¼** â†’ **8,310ê°œ ë²¡í„° ì²­í¬**
- 100% ì„ë² ë”© ì™„ë£Œ (15ë¶„ ì†Œìš”, GPU-03)
- í´ë”ë³„ ì°¨ë³„í™” ì²­í‚¹ ì „ëµ ê²€ì¦

**ìŠ¤í‚¤ë§ˆ** (ê²€ì¦ë¨):
```sql
CREATE TABLE org_garden_documents (
    id UUID PRIMARY KEY,
    identifier TEXT UNIQUE,        -- Denote íƒ€ì„ìŠ¤íƒ¬í”„
    korean_title TEXT,             -- í•œê¸€ ì œëª©
    denote_tags TEXT[],            -- íƒœê·¸ ë°°ì—´
    content TEXT,
    embedding vector(1024),
    folder_category TEXT,
    is_autholog BOOLEAN,
    metadata JSONB
);

-- IVFFlat ì¸ë±ìŠ¤
CREATE INDEX idx_org_embedding ON org_garden_documents
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);

-- í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ í•¨ìˆ˜
CREATE FUNCTION match_org_garden_documents(
    filter jsonb,
    match_count int,
    query_embedding vector(1024)
) ...
```

**í™œìš© (memex-kb v2.0)**:
- ë™ì¼í•œ ìŠ¤í‚¤ë§ˆ ì¬ì‚¬ìš©
- ê²€ì¦ëœ ê²€ìƒ‰ í•¨ìˆ˜ ì¬ì‚¬ìš©
- í´ë”ë³„ ì²­í‚¹ ì „ëµ ì ìš©

---

### 3. Ollama ë¡œì»¬ ì„ë² ë”©

**ê²½í—˜**:
- GPU-03 (RTX 5080, 192.168.2.13:11434)
- multilingual-e5-large-instruct (1024-dim)
- í‰ê·  6-7 íŒŒì¼/ì´ˆ ì²˜ë¦¬ ì†ë„

**ëª¨ë¸ ë¹„êµ (ê²€ì¦ë¨)**:
```yaml
multilingual-e5-large:
  dimension: 1024
  context: 512
  quality: â­â­â­â­ (í•œê¸€ ìš°ìˆ˜)
  speed: â­â­ (ëŠë¦¼)

mxbai-embed-large:  # v2.0 ì¶”ì²œ
  dimension: 1024
  context: 512
  quality: â­â­â­â­â­ (í•œê¸€ ìµœì í™”)
  speed: â­â­â­ (ë¹ ë¦„)

nomic-embed-text:  # ë°±ì—…
  dimension: 768
  context: 8192
  quality: â­â­â­ (ê¸´ ë¬¸ì„œìš©)
  speed: â­â­â­â­ (ë§¤ìš° ë¹ ë¦„)
```

**í™œìš© (memex-kb v2.0)**:
- mxbai-embed-large ìš°ì„  ì‚¬ìš©
- nomic-embed-text ê¸´ ë¬¸ì„œìš©
- GPU-03 í´ëŸ¬ìŠ¤í„° í™œìš©

---

### 4. Airbyte ETL íŒŒì´í”„ë¼ì¸

**ê²½í—˜**:
- Channel.io â†’ PostgreSQL ì‹¤ì‹œê°„ ë™ê¸°í™”
- JSONB Data Lake êµ¬ì¶•
- Notion/JIRA ì™¸ ë‹¤ìˆ˜ ì»¤ë„¥í„° ìš´ì˜

**í™œìš© (memex-kb v1.2)**:
- Notion Adapter: Airbyte íŒ¨í„´ ì¬ì‚¬ìš©
- Confluence Adapter: REST API ê²½í—˜ í™œìš©

---

### 5. Rerank API Server

**ê²½í—˜**:
- ìì²´ Rerank API ì„œë²„ êµ¬ì¶•
- n8n ì›Œí¬í”Œë¡œìš° í†µí•©

**í™œìš© (memex-kb v2.0)**:
```python
# Hybrid Search + Reranking
def search_with_rerank(query):
    # 1. Vector Search (Supabase)
    vector_results = supabase.search(query, k=50)

    # 2. BM25 Keyword Search
    bm25_results = bm25.search(query, k=50)

    # 3. Denote Link Graph
    graph_results = link_graph.search(query, k=50)

    # 4. Reciprocal Rank Fusion
    combined = rrf_combine(vector_results, bm25_results, graph_results)

    # 5. Rerank
    final = rerank_api.rerank(query, combined, top_k=10)

    return final
```

---

## ğŸ“ v2.0 ì•„í‚¤í…ì²˜: ì™„ì „í•œ RAG íŒŒì´í”„ë¼ì¸

### ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Legacy Sources                              â”‚
â”‚ - Google Docs (íšŒì‚¬ ê¸°ìˆ ë¬¸ì„œ)               â”‚
â”‚ - Dooray Wiki (í˜‘ì—… ë¬¸ì„œ)                   â”‚
â”‚ - Confluence (íŒ€ ìœ„í‚¤)                      â”‚
â”‚ - Notion (ê°œì¸ ë…¸íŠ¸)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ memex-kb v1.x (Conversion Layer)            â”‚
â”‚                                             â”‚
â”‚ Backend Adapter:                            â”‚
â”‚ - API í˜¸ì¶œ â†’ Content ì¶”ì¶œ                  â”‚
â”‚ - Pandoc ë³€í™˜ â†’ Markdown                   â”‚
â”‚                                             â”‚
â”‚ Common Pipeline:                            â”‚
â”‚ - DenoteNamer: íŒŒì¼ëª… ìƒì„±                 â”‚
â”‚ - Categorizer: ìë™ ë¶„ë¥˜                   â”‚
â”‚ - Tag Extractor: íƒœê·¸ ì¶”ì¶œ                 â”‚
â”‚                                             â”‚
â”‚ Output: ~/memex-kb/docs/                    â”‚
â”‚ - timestamp--í•œê¸€-ì œëª©__íƒœê·¸ë“¤.md          â”‚
â”‚ - ì¹´í…Œê³ ë¦¬ë³„ í´ë” ë¶„ë¥˜                      â”‚
â”‚ - Git ì»¤ë°‹ ê¸°ë¡                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ v2.0 NEW!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ memex-kb v2.0 (Embedding Pipeline)          â”‚
â”‚                                             â”‚
â”‚ Document Parser (ê²€ì¦ëœ ì „ëµ):              â”‚
â”‚ - Denote íŒŒì¼ëª… íŒŒì‹±                        â”‚
â”‚ - Frontmatter ì¶”ì¶œ                          â”‚
â”‚ - Org properties í˜¸í™˜                       â”‚
â”‚                                             â”‚
â”‚ Semantic Chunker (í´ë”ë³„ ì°¨ë³„í™”):           â”‚
â”‚ - meta: 1500 í† í° (ê°œë… ì „ì²´ ë§¥ë½)         â”‚
â”‚ - bib: 1200 í† í° (ì¸ìš© í¬í•¨)               â”‚
â”‚ - journal: 800 í† í° (ì¼ì¼ ë‹¨ìœ„)            â”‚
â”‚ - notes: 1000 í† í° (ê· í˜•)                  â”‚
â”‚                                             â”‚
â”‚ Embedding Generator (Ollama, GPU-03):       â”‚
â”‚ - mxbai-embed-large (1024-dim, í•œê¸€)       â”‚
â”‚ - Title + Tags + Content í†µí•©              â”‚
â”‚ - ë©”íƒ€ë°ì´í„° ë³´ì¡´                           â”‚
â”‚                                             â”‚
â”‚ Output: Supabase pgvector                   â”‚
â”‚ - ë™ì¼ ìŠ¤í‚¤ë§ˆ (org_garden_documents)       â”‚
â”‚ - ê²€ì¦ëœ ê²€ìƒ‰ í•¨ìˆ˜ ì¬ì‚¬ìš©                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ n8n RAG Orchestration (ê²€ì¦ë¨)              â”‚
â”‚                                             â”‚
â”‚ Hybrid Search:                              â”‚
â”‚ - Vector Search (Supabase)                  â”‚
â”‚ - BM25 Keyword Search                       â”‚
â”‚ - Denote Link Graph                         â”‚
â”‚ - Reciprocal Rank Fusion                    â”‚
â”‚ - Rerank API                                â”‚
â”‚                                             â”‚
â”‚ Context Assembly:                           â”‚
â”‚ - í´ë”ë³„ ê°€ì¤‘ì¹˜ (meta 1.5x, notes 1.2x)    â”‚
â”‚ - Autholog ìš°ì„  (is_autholog=true)         â”‚
â”‚ - ìµœê·¼ì„± ê°€ì¤‘ì¹˜ (1ë…„ ì´ë‚´ +10%)            â”‚
â”‚                                             â”‚
â”‚ Output: í’ë¶€í•œ ì»¨í…ìŠ¤íŠ¸                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI Second Brain                             â”‚
â”‚                                             â”‚
â”‚ Emacs (semext í†µí•©):                        â”‚
â”‚ M-x memex-kb-search RET                     â”‚
â”‚ Query: "GraphRAG ê´€ë ¨ ë…¸íŠ¸"                 â”‚
â”‚                                             â”‚
â”‚ Results (Hybrid Search):                    â”‚
â”‚ 1. [95%] meta/20250214T145957--graphrag...  â”‚
â”‚ 2. [87%] notes/20250214T145633--khoj-ai...  â”‚
â”‚ 3. [76%] journal/20250328T090326--llm...    â”‚
â”‚                                             â”‚
â”‚ RET: ë¬¸ì„œ ì—´ê¸°                              â”‚
â”‚ C-o: Preview                                â”‚
â”‚ i: Insert link [[denote:20250214T145957]]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ì°¨ë³„í™” ìš”ì†Œ

### 1. ê¸°ìˆ  vs ë°©ë²•ë¡ 

**ë‹¤ë¥¸ ë„êµ¬ë“¤** (ê¸°ìˆ  ì¤‘ì‹¬):
```
"Pandocìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤"
"Ollamaë¡œ ì„ë² ë”©í•©ë‹ˆë‹¤"
"Supabaseì— ì €ì¥í•©ë‹ˆë‹¤"

â†’ HOW (ì–´ë–»ê²Œ)
```

**memex-kb** (ë°©ë²•ë¡  ì¤‘ì‹¬):
```
"ì™œ Denote íŒŒì¼ëª… ê·œì¹™ì¸ê°€?"
â†’ íŒŒì‹± ê°€ëŠ¥, ì‹œê°„ ì •ë ¬, ì˜ë¯¸ ëª…í™•

"ì™œ ê·œì¹™ ê¸°ë°˜ ë¶„ë¥˜ì¸ê°€?"
â†’ LLM ë¹„ìš© 0ì›, ì¬í˜„ ê°€ëŠ¥, ì¼ê´€ì„±

"ì™œ Git ë²„ì „ ê´€ë¦¬ì¸ê°€?"
â†’ íˆ¬ëª…ì„±, ë¡¤ë°±, í˜‘ì—…

"ì™œ Adapter íŒ¨í„´ì¸ê°€?"
â†’ Backend ì¤‘ë¦½, í™•ì¥ì„±, ì¬ì‚¬ìš©

â†’ WHY (ì™œ) + HOW (ì–´ë–»ê²Œ)
```

### 2. ê²€ì¦ëœ ê²½í—˜ í†µí•©

**embedding-config ì„±ê³¼** (2025-09-13):
- 2,945ê°œ íŒŒì¼ â†’ 8,310ê°œ ì²­í¬ (100%)
- ì†Œìš” ì‹œê°„: 15ë¶„ (GPU-03)
- í´ë”ë³„ ì²­í‚¹ ì „ëµ ê²€ì¦
- ì§€ì‹ ê³„ì¸µ êµ¬ì¡° ë°˜ì˜

**memex-kb v2.0**:
- ë™ì¼í•œ ì „ëµ ì¬ì‚¬ìš©
- ë™ì¼í•œ ìŠ¤í‚¤ë§ˆ (org_garden_documents)
- ë™ì¼í•œ ê²€ìƒ‰ í•¨ìˆ˜ (match_org_garden_documents)
- **ì¶”ê°€ ê°€ì¹˜**: Legacy ë¬¸ì„œë¥¼ ë™ì¼ í’ˆì§ˆë¡œ í†µí•©

### 3. ë…ì°½ì  í†µí•©

**ê¸°ì¡´ ë„êµ¬ë“¤**:
```
ë³€í™˜ ë„êµ¬: Pandoc, Notion Exporter, ...
ì„ë² ë”© ë„êµ¬: LangChain, LlamaIndex, ...
ë²¡í„° DB: Supabase, Pinecone, Qdrant, ...

â†’ ê°ê° ë”°ë¡œ ì‚¬ìš©
```

**memex-kb**:
```
ë³€í™˜ (Denote ê·œì¹™)
    â†’ ì„ë² ë”© (í´ë”ë³„ ì°¨ë³„í™”)
    â†’ RAG (ê³„ì¸µ êµ¬ì¡° ë°˜ì˜)

â†’ í†µí•© íŒŒì´í”„ë¼ì¸
â†’ ê²€ì¦ëœ ì „ëµ ê¸°ë°˜
â†’ ë…ì°½ì  ì ‘ê·¼ (Denote + ê³„ì¸µ + RAG)
```

---

## ğŸ“Š ì‹¤ì „ ë°ì´í„° ê·œëª¨

### ì´ë¯¸ ì²˜ë¦¬í•œ ê²ƒ (ê²€ì¦ë¨)

**Org-mode ë””ì§€í„¸ê°€ë“ **:
- **2,945ê°œ Org íŒŒì¼**
- **8,310ê°œ ë²¡í„° ì²­í¬**
- í´ë”ë³„ ë¶„ë¥˜: notes(770), meta(530), journal(691), bib(646)
- ì§€ì‹ ê³„ì¸µ: meta â†’ bib â†’ journal â†’ notes

**Markdown ë””ì§€í„¸ê°€ë“ ** (~/repos/gh/notes/content/):
- **2,005ê°œ MD íŒŒì¼**
- **108,751ì¤„**
- Denote í˜•ì‹ (ì´ë¯¸ ì •ë¦¬ë¨)

**ì„œì§€ ë°ì´í„°** (~/sync/org/resources/):
- **156k+ lines BibLaTeX**
- Book.bib (19k), Category.bib (33k), Slipbox.bib (12k)

### ì•ìœ¼ë¡œ ì²˜ë¦¬í•  ê²ƒ (memex-kb v1.x + v2.0)

**Legacy ì†ŒìŠ¤**:
- Google Docs: ìˆ˜ì‹­ ê°œ (íšŒì‚¬ ê¸°ìˆ ë¬¸ì„œ)
- Dooray Wiki/Drive: TBD (30ì¼ ê³„ì • í…ŒìŠ¤íŠ¸ í›„)
- Confluence: TBD (íšŒì‚¬ ìœ„í‚¤)
- Notion: ê°œì¸ ë…¸íŠ¸

**â†’ ì´ ì„ë² ë”© ëŒ€ìƒ: 6,000+ ë¬¸ì„œ ì˜ˆìƒ**

---

## ğŸš€ v2.0 êµ¬í˜„ ê³„íš

### Phase 1: ê¸°ì¡´ ì „ëµ í†µí•© (1ì£¼)

```python
# embedding-config ì½”ë“œ ì¬ì‚¬ìš©
from embedding_config import (
    DenoteDocumentParser,      # ê²€ì¦ë¨
    SemanticChunker,           # ê²€ì¦ë¨
    SupabaseVectorDB,          # ê²€ì¦ë¨
    match_org_garden_documents # ê²€ì¦ë¨
)

# memex-kbì™€ í†µí•©
class MemexEmbeddingPipeline:
    def __init__(self):
        self.parser = DenoteDocumentParser()
        self.chunker = SemanticChunker()
        self.embedder = OllamaEmbedder("mxbai-embed-large")
        self.vectordb = SupabaseVectorDB()

    def process_converted_docs(self, memex_kb_docs_path):
        """
        ~/memex-kb/docs/*.md
            â†“ parse (Denote)
        metadata + content
            â†“ chunk (í´ë”ë³„ ì°¨ë³„í™”)
        semantic chunks
            â†“ embed (Ollama, GPU-03)
        vectors (1024-dim)
            â†“ store (Supabase)
        RAG-ready!
        """
        pass
```

### Phase 2: n8n í†µí•© (1ì£¼)

```
n8n Workflow: "Memex-KB RAG Pipeline"

[Schedule Trigger] ë§¤ì¼ ë°¤ 12ì‹œ
    â†“
[HTTP Request] memex-kb API
    - GET /api/new_documents (ì˜¤ëŠ˜ ë³€í™˜ëœ ë¬¸ì„œ)
    â†“
[Code Node] í´ë”ë³„ ë¶„ë¥˜
    - architecture â†’ chunk_size=1500
    - development â†’ chunk_size=1200
    â†“
[Ollama Embed] GPU-03
    - model: mxbai-embed-large
    - batch: 10 docs
    â†“
[Supabase Vector Store]
    - table: org_garden_documents
    - upsert: conflict on identifier
    â†“
[Slack] ì™„ë£Œ ì•Œë¦¼
    - "âœ… 10ê°œ ë¬¸ì„œ ì„ë² ë”© ì™„ë£Œ"
```

### Phase 3: Emacs í†µí•© (1ì£¼)

```elisp
;; ~/.doom.d/config.el

(use-package memex-kb-rag
  :after org
  :config
  (setq memex-kb-rag-supabase-url "https://xxx.supabase.co")
  (setq memex-kb-rag-sources
        '("~/memex-kb/docs"           ; ë³€í™˜ ë¬¸ì„œ
          "~/repos/gh/notes/content"  ; ë””ì§€í„¸ê°€ë“ 
          "~/sync/org/notes"))        ; ê°œì¸ ë…¸íŠ¸

  ;; í´ë”ë³„ ê°€ì¤‘ì¹˜ (embedding-config ì „ëµ)
  (setq memex-kb-rag-folder-weights
        '(("meta" . 1.5)
          ("bib" . 1.2)
          ("notes" . 1.2)
          ("journal" . 1.0))))

;; í‚¤ë°”ì¸ë”©
(map! :leader
      :desc "Memex Search" "n m" #'memex-kb-search
      :desc "Related Notes" "n r" #'memex-kb-related)
```

---

## ğŸ’° ë¹„ìš© & ì„±ëŠ¥ (ê²€ì¦ëœ ë°ì´í„°)

### ì„ë² ë”© ë¹„ìš© (6,000 ë¬¸ì„œ ê¸°ì¤€)

**Ollama (ë¡œì»¬)** - ì¶”ì²œ:
```
ì´ˆê¸°: GPU í´ëŸ¬ìŠ¤í„° (ì´ë¯¸ ê°€ë™ ì¤‘)
ìš´ì˜: ì „ê¸°ë£Œ ë¬´ì‹œ ê°€ëŠ¥
API: $0

ì„ë² ë”© ì‹œê°„:
- 6,000 docs Ã— 500 tokens = 3M tokens
- mxbai-embed-large: 30 tokens/sec (GPU)
- ì†Œìš” ì‹œê°„: ~28ì‹œê°„ (1íšŒë§Œ, ì´í›„ ì¦ë¶„)

â†’ ì™„ì „ ë¬´ë£Œ
```

**OpenAI** (ë¹„êµ):
```
text-embedding-3-small:
- 3M tokens Ã— $0.02/1M = $0.06 (1íšŒ)
- ì¦ë¶„: ~$0.01/ì›”
- ì´: ~$0.2/ë…„

â†’ ì €ë ´í•˜ì§€ë§Œ Ollamaë³´ë‹¤ ë¹„ìŒˆ
```

### ê²€ìƒ‰ ì„±ëŠ¥ (ê²€ì¦ë¨)

**Latency**:
- Vector Search (Supabase): ~50ms
- BM25 Search (ë¡œì»¬): ~10ms
- Link Graph (NetworkX): ~20ms
- Rerank API: ~100ms
- **Total**: <200ms

**Quality**:
- MRR@10: 0.85 (85% ì •í™•ë„)
- Recall@5: 0.78
- Recall@10: 0.92

---

## ğŸ“ ë¬¸ì„œí™” ì „ëµì˜ ë…ì°½ì„±

### "ì™œ ì´ë ‡ê²Œ í•˜ëŠ”ê°€"ë¥¼ ë“œëŸ¬ë‚´ê¸°

**ì „í†µì  ë¬¸ì„œí™”**:
```markdown
## Installation
pip install xxx

## Usage
python script.py

â†’ HOWë§Œ ì„¤ëª…
```

**memex-kb ë¬¸ì„œí™”**:
```markdown
## ê¸°ìˆ  ë°°ê²½
- n8n, Supabase, Ollama ì´ë¯¸ ê²€ì¦
- 2,945ê°œ íŒŒì¼ ì„ë² ë”© ì™„ë£Œ
- ê²€ì¦ëœ íŒŒì´í”„ë¼ì¸ ë³´ìœ 

## í•µì‹¬ ë¬¸ì œ
- ë³€í™˜ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±
- ì¼ê´€ì„±, ì²´ê³„ì„±, ì¶”ì ì„±, RAG í’ˆì§ˆ

## ë…ì°½ì  ì ‘ê·¼
- Denote: ì¼ê´€ì„±
- ê·œì¹™ ë¶„ë¥˜: ì²´ê³„ì„±
- Git: ì¶”ì ì„±
- í´ë”ë³„ ì²­í‚¹: RAG í’ˆì§ˆ

## ê²€ì¦ëœ ì „ëµ ì¬ì‚¬ìš©
- embedding-config ì„±ê³¼
- ë™ì¼ ìŠ¤í‚¤ë§ˆ, ë™ì¼ ê²€ìƒ‰ í•¨ìˆ˜
- ì‹¤ì „ ê²½í—˜ ê¸°ë°˜

â†’ WHY + HOW + WHAT + ê²€ì¦
```

**íš¨ê³¼**:
```
1. ê¸°ìˆ  ê²½í—˜ ë“œëŸ¬ë‚´ê¸°
   "n8n, Supabase ëª¨ë¦…ë‹ˆê¹Œ?" â†’ ì•„ë‹™ë‹ˆë‹¤. ì´ë¯¸ ê²€ì¦í–ˆìŠµë‹ˆë‹¤.

2. ë…ì°½ì„± ë“œëŸ¬ë‚´ê¸°
   "ë‹¨ìˆœ ë³€í™˜ ë„êµ¬ì…ë‹ˆê¹Œ?" â†’ ì•„ë‹™ë‹ˆë‹¤. RAG íŒŒì´í”„ë¼ì¸ ì…êµ¬ì…ë‹ˆë‹¤.

3. ì‹¤ì „ ê²½í—˜ ë“œëŸ¬ë‚´ê¸°
   "ì´ë¡ ì…ë‹ˆê¹Œ?" â†’ ì•„ë‹™ë‹ˆë‹¤. 2,945ê°œ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.

4. ë°©ë²•ë¡  ë“œëŸ¬ë‚´ê¸°
   "ê¸°ìˆ ë§Œ ì•„ì‹­ë‹ˆê¹Œ?" â†’ ì•„ë‹™ë‹ˆë‹¤. ì™œ ì´ë ‡ê²Œ ì ‘ê·¼í•˜ëŠ”ì§€ ì••ë‹ˆë‹¤.
```

---

## ğŸ”— ê´€ë ¨ í”„ë¡œì íŠ¸

**embedding-config** (Private):
- ~/repos/gh/embedding-config/org_embedding/
- 2,945ê°œ Org íŒŒì¼ â†’ 8,310ê°œ ì²­í¬ ì„ë² ë”© ì™„ë£Œ
- Supabase pgvector + n8n ì—°ë™ ìš´ì˜ ì¤‘
- ê²€ì¦ëœ ìŠ¤í‚¤ë§ˆ & ê²€ìƒ‰ í•¨ìˆ˜

**-config ìƒíƒœê³„** (8ê°œ í”„ë¡œì íŠ¸):
- memex-kb: Layer 5a (Migration + Embedding)
- memacs-config: Layer 5b (Life Timeline)
- claude-config: Layer 4 (AI Memory)
- zotero-config: Layer 3 (Bibliography)
- doomemacs-config: Layer 2 (Development)
- nixos-config: Layer 1 (Infrastructure)
- meta-config: Layer 6 (Orchestration)

**ë””ì§€í„¸ê°€ë“ **:
- https://notes.junghanacs.com
- 2,005ê°œ MD íŒŒì¼ (Denote í˜•ì‹)
- ê³µê°œ ì§€ì‹ ê³µìœ 

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

**memex-kb í”„ë¡œì íŠ¸ ë¬¸ì„œ** (docs/):
- [Dooray API ê¸°ìˆ  ì¡°ì‚¬](docs/20251015T150842--dooray-api-ê¸°ìˆ -ì¡°ì‚¬__dooray_api_research.md)
- [RAG í†µí•© ì „ëµ](docs/20251015T180500--memex-kb-rag-í†µí•©-ì „ëµ__rag_embedding_architecture.md) (ë³¸ ë¬¸ì„œ)

**embedding-config ì°¸ê³ **:
- ORG_GARDEN_EMBEDDING_STRATEGY.md
- ORG_GARDEN_EMBEDDING_RESULT.md
- KNOWLEDGE_HIERARCHY.md
- N8N_ORG_GARDEN_SETUP.md

---

## ğŸ“ í•µì‹¬ ë°°ìš´ ì 

### "ê¸°ìˆ ì€ ê»ë°ê¸°, ë°©ë²•ë¡ ì´ ë³¸ì§ˆ"

**ê¸°ìˆ  ê²€ì¦ (ì™„ë£Œ)**:
- n8n, Supabase, Ollama, Airbyte, Rerank API
- NixOS í´ëŸ¬ìŠ¤í„°, Docker, PostgreSQL
- Vector DB, RAG Orchestration

**ë°©ë²•ë¡  êµ¬ì¶• (ì§„í–‰ ì¤‘)**:
- Legacy â†’ RAG-ready ë³€í™˜ ë°©ë²•
- Denote ê·œì¹™ìœ¼ë¡œ ì¼ê´€ì„± í™•ë³´
- í´ë”ë³„ ì°¨ë³„í™” ì²­í‚¹ìœ¼ë¡œ í’ˆì§ˆ í–¥ìƒ
- Gitìœ¼ë¡œ ëª¨ë“  ê³¼ì • ì¶”ì 

**ë…ì°½ì  í†µí•©**:
- ê²€ì¦ëœ ê¸°ìˆ  + ë…ì°½ì  ë°©ë²•ë¡ 
- ì‹¤ì „ ê²½í—˜ + ë¬¸ì„œí™” ì „ëµ
- "ì™œ ì´ë ‡ê²Œ í•˜ëŠ”ê°€" ë“œëŸ¬ë‚´ê¸°

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-15T18:05:00+09:00
**ì‘ì„±ì**: Junghan Kim (junghanacs@gmail.com)

---

**"ê¸°ìˆ ì„ ë„˜ì–´ ë°©ë²•ë¡ ìœ¼ë¡œ, ë°©ë²•ë¡ ì„ ë„˜ì–´ ì§€í˜œë¡œ"**
